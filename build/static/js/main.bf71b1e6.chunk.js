(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{45:function(e,n,t){},46:function(e,n,t){"use strict";t.r(n);var r=t(2),a=t.n(r),c=t(20),u=t.n(c),s=t(4),o=t(5),i=t(6),l=function(e){var n=Object(r.useState)(e),t=Object(o.a)(n,2),a=t[0],c=t[1];return[a,function(e){"checkbox"===e.target.type?c((function(n){return Object(s.a)(Object(s.a)({},n),{},Object(i.a)({},e.target.name,!n[e.target.name]))})):c((function(n){return Object(s.a)(Object(s.a)({},n),{},Object(i.a)({},e.target.name,e.target.value))}))},c]},b=t(0),j=function(e){var n=e.show,t=e.handleChange,r=e.filteredValues;return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)("span",{style:{textDecoration:n?"none":"line-through"},children:"filter shown with"})," ",Object(b.jsx)("input",{name:"filtered",onChange:t,value:r,disabled:!n})]})},d=function(e){var n=e.handleSubmit,t=e.handleChange,r=e.values;return Object(b.jsxs)("form",{onSubmit:n,children:[Object(b.jsxs)("div",{children:["name: ",Object(b.jsx)("input",{name:"name",value:r.name,onChange:t}),"number:"," ",Object(b.jsx)("input",{name:"number",type:"tel",value:r.number,onChange:t})]}),Object(b.jsx)("div",{children:Object(b.jsx)("button",{type:"submit",children:"add"})})]})},f=t(3),m=t.n(f),h=t(7),p=t(8),O=t.n(p),v="/api/persons",x=function(){var e=Object(h.a)(m.a.mark((function e(){var n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.a.get(v);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),w=function(){var e=Object(h.a)(m.a.mark((function e(n){var t;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.a.post(v,n);case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),g=function(){var e=Object(h.a)(m.a.mark((function e(n,t){var r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.a.put("".concat(v,"/").concat(n),t);case 2:return r=e.sent,e.abrupt("return",r.data);case 4:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}(),y=function(){var e=Object(h.a)(m.a.mark((function e(n){var t;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.a.delete("".concat(v,"/").concat(n));case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),k=function(e){var n=e.personInfo,t=e.setPersons;return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsxs)("p",{children:[n.name," ",n.number]}),Object(b.jsx)("button",{onClick:function(){window.confirm("Delete ".concat(n.name," ?"))&&y(n.id).then((function(){return t((function(e){return e.filter((function(e){return e.id!==n.id}))}))}))},children:"delete"})]})},C=function(e){var n=e.setPersons,t=e.persons,r=e.show,a=e.values,c=e.toggle;return Object(b.jsxs)("div",{children:[Object(b.jsxs)("button",{onClick:c,children:[r?"Hide":"Show"," contacts "]}),r&&t&&t.filter((function(e){return e.name.toLowerCase().includes(a.filtered.toLowerCase())})).map((function(e){return Object(b.jsx)(k,{personInfo:e,setPersons:n},e.name)}))]})},S=function(e){var n=e.msg,t=e.name;return null===n?null:Object(b.jsx)("div",{className:t,children:n})},P=function(){var e=Object(r.useState)([]),n=Object(o.a)(e,2),t=n[0],a=n[1],c=Object(r.useState)(null),u=Object(o.a)(c,2),i=u[0],f=u[1],m=Object(r.useState)(null),h=Object(o.a)(m,2),p=h[0],O=h[1];Object(r.useEffect)((function(){x().then((function(e){return a(e)}))}),[]);var v=Object(r.useState)(!0),y=Object(o.a)(v,2),k=y[0],P=y[1],I=l({name:"",number:"",filtered:""}),D=Object(o.a)(I,3),T=D[0],B=D[1],E=D[2];return Object(b.jsxs)("div",{children:[Object(b.jsx)("h2",{children:"PhoneBook"}),Object(b.jsx)(S,{name:"success",msg:i}),Object(b.jsx)(S,{name:"error",msg:p}),Object(b.jsx)(j,{filteredValues:T.filtered,handleChange:B,show:k}),Object(b.jsx)("h2",{children:"add a new"}),Object(b.jsx)(d,{handleChange:B,handleSubmit:function(e){e.preventDefault();var n={name:T.name,number:T.number};if(t.find((function(e){return e.name===T.name}))){if(window.confirm("".concat(T.name," is already added to phonebook, replace the old number with a new one?"))){var r=t.find((function(e){return e.name===T.name}));g(r.id,Object(s.a)(Object(s.a)({},r),{},{number:T.number})).then((function(e){a(t.map((function(n){return n.name===r.name?e:n}))),f("Updated ".concat(e.name)),setTimeout((function(){return f(null)}),4e3)})).catch((function(){O("Information of ".concat(r.name," has already been removed from server")),setTimeout((function(){return O(null)}),4e3)}))}}else w(n).then((function(e){a(t.concat(e)),f("Added ".concat(e.name)),setTimeout((function(){return f(null)}),4e3)}));E({name:"",number:"",filtered:""})},values:T}),Object(b.jsx)("h2",{children:"Numbers"}),Object(b.jsx)(C,{persons:t,show:k,toggle:function(){return P(!k)},values:T,setPersons:a})]})};t(45);u.a.render(Object(b.jsx)(a.a.StrictMode,{children:Object(b.jsx)(P,{})}),document.getElementById("root"))}},[[46,1,2]]]);
//# sourceMappingURL=main.bf71b1e6.chunk.js.map